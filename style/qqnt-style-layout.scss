// 左边栏
@mixin sidebar() {
    // 左边栏
    & .sidebar-nav .sidebar-wrapper {
        & .sidebar__upper {
            // 头像
            & .sidebar__avatar {
                & .user-avatar-container {
                    // 头像图片
                    & .user-avatar {
                        // 头像图片
                    }
                    // 在线状态小icon
                    & .icon {
                    }
                }
            }
            // 中栏按钮
            & .sidebar__nav {
                // 每个按钮项
                & .nav-item {
                    // 功能按钮
                    & .sidebar-tooltips .tab-item {
                        & .tab-item-mask {
                            // 蒙版
                        }
                        & .tab-item-img {
                            &.tab-item-img-highlight {
                                // 选中，高亮icon，颜色填充
                            }
                            &.tab-item-img-normal {
                                // 未选中，普通icon，只有线条
                            }
                        }
                    }
                    // 更多按钮
                    & .more-item {
                        & .mask {
                            // 蒙版
                        }
                        & i.q-icon {
                            // icon
                        }
                    }
                }
            }
        }
        // 底部按钮
        & .sidebar__lower {
            & .func-menu {
                & .func-menu__item_wrap {
                    // 功能按钮项
                    & .func-menu__item {
                        & .icon-item {
                            & i.q-icon {
                                // icon图片
                            }
                        }
                    }
                }
            }
        }
    }
}

// 会话列表
@mixin layout-aside() {
    // 左侧，最近会话栏
    & .two-col-layout__aside {
        // 最近会话栏
        & .recent-contact {
            // 顶部bar
            & .contact-top-bar {
                // 搜索框
                & .main-search {
                }
                // 加号按钮
                & .contact-adder-btn {
                }
            }
            // 列表区域
            & .list-toggler & .recent-contact-list {
                & .viewport-list {
                    // 会话列表
                    & .viewport-list__inner {
                        // 会话项
                        & .list-item {
                            & .list-item__container {
                                & .list-item__content {
                                    // 头像
                                    & .list-item__avatar {
                                        & .avatar {
                                            // 头像图片
                                        }
                                    }
                                    // 信息
                                    & .list-item__info {
                                        // 标题行
                                        & .list-item__title {
                                            // 用户名
                                            & .main-info {
                                                & span {
                                                    // 用户名文字
                                                }
                                            }
                                            // 最后活动时间
                                            & .secondary-info {
                                                & span {
                                                    // 时间文字
                                                }
                                            }
                                        }
                                        // 摘要行
                                        & .list-item__summary {
                                            // 摘要文字
                                            & .summary-main {
                                                & .recent-contact-abstract {
                                                    // 文字内容
                                                }
                                            }
                                            // 未读消息数字气泡
                                            & .summary-bubble {
                                                // 普通气泡
                                                & sub.q-badge-sub.q-badge__grey {
                                                    & i {
                                                        // 数字文字
                                                    }
                                                }
                                                // 红色气泡
                                                & sub.q-badge-sub.q-badge__red {
                                                    & i {
                                                        // 数字文字
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
        // 宽度调节handler
        & .resize-handler {
        }
    }
}

// 聊天区域
@mixin layout-main() {
    // all-in-one，聊天区域，包含独立聊天框
    & .aio {
        // 顶栏
        & .panel-header {
            // 背景蒙版
            & .background-mask {
            }
            // 标题
            & .panel-header__title {
                & #chatHeaderContactName {
                    // 群名 or 用户名
                }
                & #chatHeaderMembersCount {
                    // 群人数
                }
                & .online-status-icon {
                    // 用户在线状态
                }
            }
        }
        // 聊天区域
        & .group-panel {
            // 聊天栏
            & .group-chat {
                & main.chat-msg-area {
                    // 聊天列表
                    & .ml-area .ml-list {
                        // 每行聊天项（虚拟滚动列表，消息排列顺序与dom结构不同）
                        & .ml-item {
                            & .message {
                                // 聊天时间
                                &.message__timestamp {
                                    & span {
                                        // 时间文字
                                    }
                                }

                                // 聊天消息
                                & .message-container {
                                    // 由 .message-container--align-right 控制消息是否显示在右侧，自己发的消息均带该属性

                                    // 自己发的消息
                                    &.message-container--self {
                                        // 自己头像
                                        & .avatar-span {
                                            & .message-container__avatar {
                                                // 头像图片
                                            }
                                        }
                                        // 自己昵称
                                        & .user-name {
                                            & span {
                                                // 昵称文字
                                            }
                                        }
                                        // 消息内容wrapper
                                        & .message-content__wrapper {
                                            & .msg-content-container.container--self {
                                                & .message-content {
                                                    // 图片消息
                                                    & .image.pic-element {
                                                        & img.image-content {
                                                            // 自己发的图片
                                                        }
                                                    }
                                                    // 文字消息
                                                    & span.text-element {
                                                        & span.text-normal {
                                                            // 普通文字
                                                        }
                                                        & span.text-link {
                                                            // URL链接
                                                        }
                                                        & span.text-element--at {
                                                            // @其他用户
                                                        }
                                                    }
                                                    // 语音消息
                                                    & .ptt-message__inner {
                                                        // 语音内容
                                                        & .ptt-element {
                                                            & .ptt-element__top-area {
                                                                // 播放按钮
                                                                & .ptt-element__button {
                                                                }
                                                                // 进度条
                                                                & .ptt-element__progress {
                                                                }
                                                                // 语音时长
                                                                & .ptt-element__duration {
                                                                }
                                                            }
                                                        }
                                                        // 文字识别内容
                                                        & .ptt-element__bottom-area {
                                                        }
                                                    }
                                                }
                                            }
                                        }

                                        // 消息状态
                                        & .content-status {
                                            & i.q-icon {
                                                // 发送失败小红点
                                            }
                                        }
                                    }
                                    // 他人发的消息
                                    &:not(.message-container--self) {
                                        // 他人头像
                                        & .avatar-span {
                                            & .message-container__avatar {
                                                // 头像图片
                                            }
                                        }
                                        // 他人昵称
                                        & .user-name {
                                            & span {
                                                // 昵称文字
                                            }
                                        }
                                        // 消息内容
                                        & .message-content__wrapper {
                                            & .msg-content-container.container--others {
                                                & .message-content {
                                                    // 图片消息
                                                    & .image.pic-element {
                                                        & img.image-content {
                                                            // 对方发的图片
                                                        }
                                                    }
                                                    // 文字消息
                                                    & span.text-element {
                                                        & span.text-normal {
                                                            // 普通文字
                                                        }
                                                        & span.text-link {
                                                            // URL链接
                                                        }
                                                        & span.text-element--at {
                                                            // @其他用户
                                                        }
                                                    }
                                                    // 语音消息
                                                    & .ptt-message__inner {
                                                        // 语音内容
                                                        & .ptt-element {
                                                            & .ptt-element__top-area {
                                                                // 播放按钮
                                                                & .ptt-element__button {
                                                                }
                                                                // 进度条
                                                                & .ptt-element__progress {
                                                                }
                                                                // 语音时长
                                                                & .ptt-element__duration {
                                                                }
                                                            }
                                                        }
                                                        // 文字识别内容
                                                        & .ptt-element__bottom-area {
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
                // 输入框，编辑器
                & .chat-input-area {
                    // 展开列表
                    & .expression-panel {
                        // 表情列表
                        & .sticker-panel {
                        }
                    }

                    // 聊天工具栏
                    & .chat-func-bar {
                        & .func-bar:nth-child(1) {
                            // 左侧工具（发表情/截图等）
                        }
                        & .func-bar:nth-child(1) {
                            // 右侧工具（聊天记录）
                        }
                    }

                    // 输入框
                    & .msg-input {
                        & .qq-editor {
                            & .ck-editor__main {
                                & .ck-content {
                                    // 文字输入区域，contenteditable div
                                }
                            }
                        }
                    }

                    // 输入框操作（关闭、发送）
                    & .operation {
                        // 关闭按钮
                        & button.close {
                        }

                        // 发送按钮
                        & .send-btn-wrap {
                            // 发送按钮
                            & .send {
                                & .send-msg {
                                    // 发送
                                }
                            }
                            // 发送按钮，禁用状态
                            & .send.send--disabled {
                                & .send-msg {
                                    // 发送
                                }
                            }

                            // 发送选项下拉菜单
                            & .send-setting__wrapper {
                            }
                        }
                    }

                    // 转发选项菜单（逐条转发、合并转发等）
                    & ul.forward-ops {
                        // 每个转发选项
                        & li {
                            & > button {
                                // 功能按钮
                            }
                            & > div {
                                // 功能说明文字
                            }
                        }
                    }

                    // 编辑器高度调节handler
                    & .resize-handler {
                    }
                }
            }
            // 右栏 群公告、群成员
            & .group-box__container & .group-box__wrapper {
                // 群公告、群成员
                & .group-box {
                    // 群公告
                    & .group-notice {
                        // 公告标题
                        & .title {
                        }
                        // 公告内容
                        & .content {
                        }
                    }
                    // 群成员
                    & .group-member .group-member__main {
                        & .group-member-list .viewport-list {
                            // 成员列表
                            & .viewport-list__inner {
                                // 成员
                                & .group-user .group-user__content {
                                    & .group-user__avatar {
                                        // 头像
                                    }
                                    & .group-user__name {
                                        // 昵称
                                    }
                                    // 标签（群主、管理员）
                                    & .group-user__role {
                                        &:not(.primary) {
                                            // 管理员
                                        }
                                        &.primary {
                                            // 群主
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
                // 展开右栏的小按钮
                & .group-box__toggle {
                }
            }
        }
    }
}

@mixin container() {
    .container {
        @include sidebar();
        // 主要区域（会话列表和聊天框）
        & .tab-container .message-panel .two-col-layout {
            @include layout-aside();
            @include layout-main();
        }
    }
}

// 日间主题
@media (prefers-color-scheme: light) {
    // 主题配色和参数
    :root {
    }

    .container {
        @include sidebar();
        @include layout-aside();
        @include layout-main();
    }
}

// 夜间主题
@media (prefers-color-scheme: dark) {
    // 主题配色和参数
    :root {
    }

    .container {
        @include sidebar();
        @include layout-aside();
        @include layout-main();
    }
}
